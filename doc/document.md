> 是的，我有点标题党了。但是有时候就是这个样子，你不知道对方要什么，对方也解释不清自己想要什么，沟通也是在消耗时间，但是事情总是要做下去，如何解决？在软件编程领域有很多设计模式可以解决这个问题，以及这里将要用到的微内核架构。都是比较常见的用于解决复杂抽象问题的设计模式，还有一个封装原则来度量设计模式的使用是否正确。如果现实生活中也可以用编程的设计模式解决就好了。(T_T)，这就是理想很丰满现实很骨感的写照吧。

# 写一个校验库。但是却不能有校验功能 ---- What？

写一个没有校验功能的校验库，听起来就是下图一样的感受。
<div align="center">
  <img src="https://github.com/ryouaki/validator/blob/main/doc/images/1.jpeg" alt="hoppscotch.io logo" height="128">
</div>
是的，但是挑战就在那里。事情往往就是这个样子，问题总是要被解决的，要么逃避，要么死磕。而在编程领域，往往有很多模式帮助我们去死磕到底。就像前几年网络流行的一个梗：五彩斑斓的黑。最后还是被广大网友找到了答案。

## 为什么要搞一个没有校验功能的校验库 ---- Why？
JS校验库，我们往往会想到validator.js，已经是一个非常优秀的校验库了。并且提供了扩展接口，通过不同的rule组合来满足不同的业务场景需要。但是往往也会带来一个问题，业务代码臃肿。同一个team不同的人可能会写很多重复的rule。那么如何解决这个问题呢？

这就是我面临的挑战。
- 降低研发人员写校验逻辑的开发成本
- 业务无关，业务方可以通过添加插件的形式任意接入和定制化自己的校验规则
- 校验规则最大化可复用，提高开发效率
- 水平扩展能力，通过微内核架构模式提供插件注册机制来满足水平扩展的需要，这是非常重要的一点
- 这几天比较狂躁，需要给自己找点有挑战的事情虐一下自己，充实一下自己。

## 如何去实现这样一个校验库呢 ---- How？
设计模式有很多解决各种问题的方法，那么需要用哪些设计模式来解决这个问题呢？如何判断这个设计模式是否使用的合理呢？答案就是 ---- 设计模式与面向对象五大原则（在这里我一定要想大家安利一本书《敏捷软件开发:原则、模式与实践》）

### 微内核架构
何为微内核架构呢？简单来说就是插件化架构。将不同的功能以插件的形式，集成到系统中。将不同的功能以插件的形式进行拆分，然后通过安装各种功能的插件到系统中来扩展系统的功能以实现水平扩展的能力。
<div align="center">
  <img src="https://github.com/ryouaki/validator/blob/main/doc/images/2.jpeg" alt="hoppscotch.io logo" height="128">
</div>

### 解析器模式
这是对解析器模式的解释：给定一个语言, 定义它的文法的一种表示，并定义一个解释器, 该解释器使用该表示来解释语言中的句子。

之所以需要使用解析器模式，主要是为了实现微内核架构模式。